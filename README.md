# FAN-ATPG

A Fault-Oriented Test Pattern Generation Tool implementing the FAN (FAN-Alternative Node) algorithm for digital circuits.

## Overview

FAN-ATPG is a test pattern generator for combinational digital circuits that implements the FAN algorithm, an enhanced version of the PODEM algorithm with strategies for reducing backtracking during test generation. This tool can:

- Generate test patterns for single stuck-at faults
- Generate test patterns for all faults in a circuit
- Compact test patterns to reduce test set size
- Parse and analyze circuit descriptions in BENCH format

## Project Structure

```
fan-atpg/
├── cmd/              # Command-line tools
│   └── main.go       # Main executable
├── pkg/              # Core packages
│   ├── algorithm/    # FAN algorithm implementation
│   ├── circuit/      # Circuit representation 
│   └── utils/        # Utility functions
└── test/             # Test cases
```

### Key Components

- **Circuit Model**: Representation of digital circuits with gates and lines
- **Topology Analysis**: Identification of free, bound, and head lines for the FAN algorithm
- **Implication Engine**: Forward and backward implications
- **FAN Algorithm**: Implementation with unique sensitization and multiple backtrace
- **Test Pattern Generator**: For single faults and fault collections

## Installation

Prerequisites:
- Go 1.23.5 or higher

Clone the repository:
```bash
git clone https://github.com/fyerfyer/fan-atpg.git
cd fan-atpg
```

Build the executable:
```bash
go build -o fan-atpg ./cmd
```

## Usage

### Basic Usage

```bash
./fan-atpg -circuit path/to/circuit.bench -fault "net42/1" -output tests.txt
```

### Generate Tests for All Faults

```bash
./fan-atpg -circuit path/to/circuit.bench -all -output all_tests.txt
```

### Command Line Options

- `-circuit`: Path to circuit file in BENCH format (required)
- `-fault`: Specific fault to test (e.g., "net42/1" for net42 stuck-at-1)
- `-all`: Generate tests for all faults
- `-output`: Output file for test vectors (default: tests.txt)
- `-compact`: Whether to compact test vectors (default: true)
- `-verbose`: Enable verbose output
- `-log`: Log file (default: stdout)

## Input Format

FAN-ATPG accepts circuits in BENCH format:

```
# Circuit description
INPUT(a)
INPUT(b)
OUTPUT(f)
d = AND(a, b)
e = NOT(b)
f = OR(d, e)
```

## Output Format

Test vectors are written in a simple text format:

```
# Test vectors generated by FAN-ATPG
# Format: a b 
# Test vector 1
1 0
# Test vector 2
0 1
```

## Algorithm Overview

The FAN algorithm extends the PODEM algorithm with several key strategies:
- Unique sensitization for D-frontier gates
- Distinction between free, bound, and head lines
- Multiple backtrace to head lines
- Postponement of line justification to reduce backtracking

## License

This project is licensed under the MIT License.
